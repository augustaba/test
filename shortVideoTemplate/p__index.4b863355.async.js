(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"/58X":function(e,a,t){e.exports={previewWrapper:"previewWrapper___280vN",previewContainer:"previewContainer___1sWN5",lottieView:"lottieView___2vn1z",right:"right___2zRB5",tip:"tip___3vZDN"}},"/sTe":function(e,a,t){"use strict";t.r(a),t.d(a,"JumpToThisPage",(function(){return pe})),t.d(a,"getLayers",(function(){return ge}));t("IzEo");var n=t("bx4M"),r=(t("T2oS"),t("W9HT")),l=(t("14J3"),t("BMrR")),c=(t("jCWc"),t("kPKH")),i=(t("P2fV"),t("NJEC")),o=(t("+L6B"),t("2/Rp")),s=(t("OaEy"),t("2fM7")),u=t("o0o1"),d=t.n(u),m=(t("miYZ"),t("tsqr")),v=t("HaE+"),p=t("ODXe"),g=t("VTBJ"),f=t("cDcd"),b=t.n(f),h=t("9kvl"),E=t("arS/"),O=t.n(E),y=t("9lBp"),j=t.n(y),w=(t("2qtc"),t("kLXV")),k=t("wx14"),N=(t("Znn+"),t("ZTPi")),_=(t("DZo9"),t("8z0m")),x=t("Urjs"),C=(t("R9oj"),t("ECub")),S=(t("ozfa"),t("MJZm")),I=(t("5NDa"),t("5rEg")),z=t("nZwT"),T=t("9gx3"),D=t.n(T),L=t("RzRL");function P(e){return e.map((e=>{var a={key:e.pictureCategoryId,title:e.pictureCategoryName.replace(/(^\s*)|(\s*$)/g,""),icon:b.a.createElement(z["CarryOutOutlined"],null),children:[]};return e.children&&e.children.length?(a.children=P(e.children),a):a}))}function J(e,a,t){e.forEach((e=>{if(e.title.indexOf(a)>-1)t.push(e);else{if(!e.children||!e.children.length)return!1;console.log(e,e.title.indexOf(a)),J(e.children,a,t)}}))}var B=e=>{var a=Object(f["useState"])([]),t=Object(p["a"])(a,2),n=t[0],l=t[1],c=Object(f["useState"])([]),i=Object(p["a"])(c,2),o=i[0],s=i[1],u=Object(f["useState"])([]),d=Object(p["a"])(u,2),m=d[0],v=d[1],g=Object(f["useState"])("-1"),h=Object(p["a"])(g,2),E=h[0],O=h[1],y=Object(f["useState"])([]),j=Object(p["a"])(y,2),w=j[0],k=j[1],N=e=>{var a=[];J(n,e,a),s(a)},_=Object(x["c"])(L["f"]),z=_.data,T=_.run,B=Object(x["c"])(L["g"],{initialParams:{pictureCategoryId:"-1"}}),R=B.data,W=B.run,V=B.loading;Object(f["useEffect"])((()=>{T()}),[]),Object(f["useEffect"])((()=>{if(z){var e,a,t,n,r=P([z]);console.log(r),s(r),l(r),v([null!==(e=null===(a=r[0])||void 0===a?void 0:a.key)&&void 0!==e?e:"0"]),W({pictureCategoryId:null!==(t=null===(n=r[0])||void 0===n?void 0:n.key)&&void 0!==t?t:"0"})}}),[z]),Object(f["useEffect"])((()=>{R&&k(R.list)}),[R]);var U=e=>{console.log(e),v(e),W({pictureCategoryId:null===e||void 0===e?void 0:e[0]})},F=(a,t)=>()=>{if(a===E)return O("-1"),void e.onSelect();O(a),e.onSelect(t)};return b.a.createElement("div",{className:D.a.imageSpace},b.a.createElement("div",{className:D.a.left},b.a.createElement(I["a"].Search,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0",onSearch:N}),b.a.createElement("div",{className:D.a.treeArea},o.length?b.a.createElement(S["a"],{showLine:!0,showIcon:!1,selectedKeys:m,defaultExpandAll:!0,onSelect:U,treeData:o}):b.a.createElement("div",{className:"flex-center",style:{height:"100%"}},b.a.createElement(C["a"],null)))),b.a.createElement("div",{className:D.a.right},b.a.createElement(r["a"],{spinning:V},b.a.createElement("div",{className:D.a.imgList},w.length?w.map((e=>{var a=e.pictureId,t=e.picturePath;return b.a.createElement("div",{key:a,className:"".concat(D.a.imgListItem," ").concat(E===a?D.a.imgItemChecked:""),onClick:F(a,t)},b.a.createElement("img",{className:D.a.img,src:t}),b.a.createElement("span",{className:"textOverFlow1"},"WechatIMG71333dsa\u4f60\u5bb6\u554a\u70b9"))})):b.a.createElement("div",{style:{width:"100%"},className:"flex_center"},b.a.createElement(C["a"],null))))))},R=B,W=t("qQNu"),V=t.n(W),U=(t("hzVQ"),600),F=(e,a)=>{var t,n;return e>a?(t=U,n=t*a/e):e<a?(n=U,t=n*e/a):(t=U,n=U),{width:t,height:n}},A=e=>{var a=Object(f["useState"])(),t=Object(p["a"])(a,2),n=t[0],r=t[1],l=Object(x["a"])({onOk:function(){var a=Object(v["a"])(d.a.mark((function a(){return d.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n&&e.onChange(n),a.abrupt("return",!0);case 2:case"end":return a.stop()}}),a)})));function t(){return a.apply(this,arguments)}return t}()}),c=Object(p["a"])(l,2),i=c[0],o=c[1],s=Object(f["useState"])({unit:"%",width:30,aspect:1}),u=Object(p["a"])(s,2),m=u[0],h=u[1],E=Object(f["useState"])(0),O=Object(p["a"])(E,2),y=O[0],j=O[1],N=Object(f["useState"])(0),_=Object(p["a"])(N,2),C=_[0],S=_[1],I=Object(f["useRef"])(),z=e=>{console.log(e),h(e)},T=e=>{console.log("complete"),L(e)},D=e=>{I.current=e},L=function(){var e=Object(v["a"])(d.a.mark((function e(a){var t;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(I,a),!(I.current&&a.width&&a.height)){e.next=6;break}return e.next=4,P(I.current,a,I.current.name||"".concat(new Date));case 4:t=e.sent,r(t);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),P=(e,a,t)=>new Promise(((t,n)=>{var r=document.createElement("canvas"),l=e.naturalWidth/e.width,c=e.naturalHeight/e.height;console.log(a,e.naturalWidth,e.naturalHeight);var i=a.width*l,o=a.height*c;r.width=null!==i&&void 0!==i?i:0,r.height=null!==o&&void 0!==o?o:0,console.log(a.x*l,a.y*c,a.width*l,a.height*c);var s=r.getContext("2d");s.drawImage(e,a.x*l,a.y*c,i,o,0,0,i,o),r.toBlob((e=>{e?t(e):console.error("Canvas is empty")}),"image/jpeg")}));return Object(f["useEffect"])((()=>{console.log(e.visible),e.visible&&o(!0)}),[e.visible]),Object(f["useEffect"])((()=>{var a=new Image;a.src=e.url,a.onload=function(){var e=F(a.naturalWidth,a.naturalHeight),t=e.width,n=e.height;console.log(t,n),j(t),S(n)}}),[e.url]),Object(f["useEffect"])((()=>(console.log("aspect,---------",e.aspect),h((a=>{var t;return Object(g["a"])(Object(g["a"])({},a),{},{aspect:null!==(t=e.aspect)&&void 0!==t?t:1})})),()=>{})),[e.aspect]),Object(f["useEffect"])((()=>{h((e=>Object(g["a"])(Object(g["a"])({},e),y>C?{height:C}:{width:y})))}),[y,C]),b.a.createElement(b.a.Fragment,null,b.a.createElement(w["a"],Object(k["a"])({},i,{destroyOnClose:!0,title:"\u56fe\u7247\u7f16\u8f91\u5668",width:700,afterClose:()=>{e.onSetVisible(!1)}}),b.a.createElement("div",{className:"flex-center"},b.a.createElement(V.a,{crossorigin:"anonymous",imageStyle:{width:y,height:C,maxWidth:"initial"},ruleOfThirds:!0,src:e.url,crop:m,onChange:z,onComplete:T,onImageLoaded:D}))))},q=A;function M(e){e.length;var a=e.width,t=e.height,n=e.file,r=e.accept,l=void 0===r?"":r,c=e.size,i=e.type,o=e.showName,s=void 0!==o&&o;if(!n)return m["b"].error("file \u4e0d\u5b58\u5728!"),new Promise(((e,a)=>{a()}));var u=s?' " '.concat(n.name,' " '):"",d=c?1024*c*1024:0;if(c&&n.size>d)return m["b"].warning("".concat(u,"\u6587\u4ef6\u8d85\u51fa\u5927\u5c0f,\u65e0\u6cd5\u4e0a\u4f20!")),new Promise(((e,a)=>{a()}));var v=n.type;if((!v||0==v.length)&&n.name.length>0){var p=n.name.split(".");v=p[p.length-1]}if(v&&v.split("/").length>1&&(v=v.split("/")[1]),l&&l.length>0&&-1===l.toLowerCase().indexOf(v.toLowerCase()))return m["b"].error("".concat(u,"\u6587\u4ef6\u7c7b\u578b\u9519\u8bef\uff0c\u4ec5\u652f\u6301").concat(l,"\u683c\u5f0f!")),new Promise(((e,a)=>{a()}));var g=a,f=t;return-1!==i.indexOf("image")?new Promise(((e,a)=>{var t=new Image;t.onload=()=>{var r=s?"".concat(n.name," : "):"";g&&t.width!==g&&null===f?(m["b"].error("".concat(r,"\u8bf7\u4e0a\u4f20\u56fe\u7247\u5bbd\u5ea6\u4e3a ").concat(g)),a()):f&&t.height!==f&&null===g?(m["b"].error("".concat(r,"\u8bf7\u4e0a\u4f20\u56fe\u7247\u9ad8\u5ea6\u4e3a ").concat(f)),a()):g&&t.width!==g&&f&&t.height!==f?(m["b"].error("".concat(r,"\u56fe\u7247\u5c3a\u5bf8\u4e3a ").concat(g," * ").concat(f)),a()):e({src:t.src,width:t.width,height:t.height})},t.onerror=()=>{a()},t.src=window.URL.createObjectURL(n)})):new Promise(((e,a)=>{e()}))}var H=_["a"].Dragger,G=[{tab:"\u672c\u5730\u4e0a\u4f20",key:"local"},{tab:"\u56fe\u7247\u7a7a\u95f4",key:"space"}],Z=e=>{var a=Object(f["useState"])("local"),t=Object(p["a"])(a,2),n=t[0],r=t[1],l=Object(f["useState"])(),c=Object(p["a"])(l,2),i=c[0],o=c[1],s=Object(f["useState"])(!1),u=Object(p["a"])(s,2),m=u[0],g=u[1],h=Object(f["useState"])(),E=Object(p["a"])(h,2),O=E[0],y=E[1],j=Object(f["useState"])(!1),_=Object(p["a"])(j,2),C=_[0],S=_[1],I=Object(x["a"])({showConfirmLoading:!1,onOk:function(){var e=Object(v["a"])(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(i),i){e.next=3;break}return e.abrupt("return",!1);case 3:return g(!0),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}()}),z=Object(p["a"])(I,2),T=z[0],D=z[1],L=Object(f["useState"])(!1),P=Object(p["a"])(L,2),J=(P[0],P[1],e=>{o(e)}),B={name:"file",multiple:!1,showUploadList:!0,fileList:O?[O]:[],accept:".jpg,.png,.jpeg",beforeUpload(e){return new Promise(((a,t)=>M({file:e,type:"image",accept:"jpg,png,jpeg"}).then((e=>{(null===e||void 0===e?void 0:e.src)&&(o(e.src),g(!0)),a()})).catch((()=>{t(!1)}))))},onChange(e){var a=e.file;e.fileList;a.url=i,console.log(a,"fffff"),y(a)},onPreview(){(null===O||void 0===O?void 0:O.url)&&S(!0)}};return b.a.createElement(b.a.Fragment,null,b.a.createElement("span",{onClick:()=>D(!0)},e.children),b.a.createElement(w["a"],Object(k["a"])({},T,{destroyOnClose:!0,okButtonProps:{disabled:!i},width:600,bodyStyle:{height:500,display:"flex",flexDirection:"column"}}),b.a.createElement("div",null,b.a.createElement(N["a"],{activeKey:n,onChange:r},G.map((e=>{var a=e.tab,t=e.key;return b.a.createElement(N["a"].TabPane,{tab:a,key:t})})))),b.a.createElement("div",{style:{flex:1,overflowY:"hidden"}},"local"===n&&b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{style:{height:"80%"}},b.a.createElement(H,B,b.a.createElement("img",{src:"https://img.alicdn.com/imgextra/i3/1881744325/O1CN01OHJ79Q1hotbY1BTET_!!1881744325.png"}),b.a.createElement("div",{className:"mt20 ft14 c-normal"},"\u5c06\u56fe\u7247\u62d6\u5165\u6846\u5185\u6216\u8005",b.a.createElement("a",null,"\u70b9\u6b64\u4e0a\u4f20")),b.a.createElement("div",{className:"ft12 c-gray mt4"},"\u5efa\u8bae3M\u4e4b\u5185\u7684jpg\u3001png\u3001jpeg\u683c\u5f0f\u7684\u56fe\u7247\u6587\u4ef6")))),"space"===n&&b.a.createElement(R,{onSelect:J}))),b.a.createElement(w["a"],{width:800,visible:C,footer:null,onCancel:()=>S(!1),destroyOnClose:!0},b.a.createElement("img",{style:{width:"100%"},src:null===O||void 0===O?void 0:O.url})),!!i&&m&&b.a.createElement(q,{aspect:e.aspect,visible:m,url:i,onChange:a=>{e.onOk(a),D(!1)},onSetVisible:e=>{g(e)}}))},K=Z,Q=e=>{var a=e.curImgData,t=e.onChange,n=Object(f["useState"])(!1),r=Object(p["a"])(n,2),l=r[0],c=r[1],i=Object(f["useState"])(1),s=Object(p["a"])(i,2),u=s[0],d=s[1],m=()=>{c(!0)},v=()=>{c(!1)},g=e=>a=>{console.log(a);var n=new FormData;n.append("imageFile",new File([a],(new Date).toString(),{type:"image/png"})),Object(L["a"])(n).then((a=>{100===a.data.result&&t({id:e,url:"https://video-template-dz.oss-cn-zhangjiakou.aliyuncs.com/".concat(a.data.data.imageUrl)})}))},h=e=>new Promise(((a,t)=>{var n=new Image;n.src=e,n.onload=()=>{console.log(n.width,n.height,n.naturalWidth,n.naturalHeight),a(n.width/n.height)},n.onerror=()=>{t()}}));return Object(f["useEffect"])((()=>{a.url&&h(a.url).then((e=>{d(e)}))}),[a]),b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:j.a.wrapper,onMouseEnter:m,onMouseLeave:v},b.a.createElement("img",{className:j.a.img,src:a.url,alt:"\u56fe\u7247"}),b.a.createElement("div",{className:"".concat(j.a.mask," ").concat(l?j.a.show:j.a.hide)},b.a.createElement(K,{onOk:g(a.id),aspect:u},b.a.createElement(o["a"],{type:"primary",size:"small"},"\u4e0a\u4f20")))))},X=Q,Y=t("/58X"),$=t.n(Y),ee=t("e3eW"),ae=e=>b.a.createElement("div",{className:$.a.previewWrapper},b.a.createElement("div",{className:$.a.previewContainer,style:{backgroundImage:"url('https://raycloud-resources-zb.oss-cn-zhangjiakou.aliyuncs.com/shortVideoTemplate/src/public/iPhone.png')",backgroundSize:"265.5px 516.4px"}},b.a.createElement("div",{className:$.a.lottieView},b.a.createElement(ee["b"],{status:"success",animationData:e.animationData,showFooter:!1}))),b.a.createElement("div",{className:$.a.right},b.a.createElement("img",{className:$.a.tip,src:"https://raycloud-resources-zb.oss-cn-zhangjiakou.aliyuncs.com/shortVideoTemplate/src/public/mouse.png",alt:"\u56fe\u7247"}))),te=ae,ne=t("LvDl"),re=t.n(ne),le=t("QeBL"),ce=t("ypy7"),ie=t.n(ce);t("rNQX");function oe(e){return{r:parseInt("0x"+e.slice(1,3)),g:parseInt("0x"+e.slice(3,5)),b:parseInt("0x"+e.slice(5,7))}}var se,ue=[24,30,32,36,38,48,60,72,80,88,93,100],de=ue.map((e=>({label:"".concat(e,"px"),value:e}))),me=e=>{var a=e.text,t=Object(f["useState"])({r:255,g:255,b:255}),n=Object(p["a"])(t,2),r=n[0],l=n[1],c=a=>{e.onChange(Object(g["a"])(Object(g["a"])({},e.text),a))},i=e=>{c({s:e})},u=e=>{c({t:e.target.value})},d=e=>{l(e),c({fc:[e.r/255,e.g/255,e.b/255]})};return Object(f["useEffect"])((()=>{var a,t,n,r,c,i;l({r:null!==(a=255*(null===(t=e.text.fc)||void 0===t?void 0:t[0]))&&void 0!==a?a:255,g:null!==(n=255*(null===(r=e.text.fc)||void 0===r?void 0:r[1]))&&void 0!==n?n:255,b:null!==(c=255*(null===(i=e.text.fc)||void 0===i?void 0:i[2]))&&void 0!==c?c:255})}),[e.text]),b.a.createElement("div",null,b.a.createElement(I["a"].TextArea,{className:"mb8",value:a.t,onChange:u}),b.a.createElement("div",{className:"flex"},b.a.createElement("div",{className:"flex flex1",style:{marginRight:"8px"}},b.a.createElement(o["a"],{className:"flex-between flex1",style:{lineHeight:0,display:"flex"}},b.a.createElement("span",{className:"mr2"},"\u989c\u8272"),b.a.createElement(ie.a,{mode:"RGB",className:"flex",color:"rgb(".concat(r.r,",").concat(r.g,",").concat(r.b,")"),onChange:e=>{d(oe(e.color))},placement:"bottomRight"}))),b.a.createElement(s["a"],{className:"flex flex1",value:a.s,onChange:i},de.map((e=>b.a.createElement(s["a"].Option,{key:e.value,value:e.value},e.label))))))},ve=me;(function(e){e[e["dz-wenzi1"]=5]="dz-wenzi1",e[e["dz-tupian3"]=2]="dz-tupian3"})(se||(se={}));var pe=e=>{h["a"].push({pathname:"/create",query:e})};function ge(e){var a=e.layers,t=e.assets;return a.reduce(((e,a,t)=>{if(1===a.ty||3===a.ty||4===a.ty)return e;if(5===a.ty)return e.concat({ty:a.ty,ip:a.ip,op:a.op,assetId:"layer".concat(t),assetValue:a.t.d.k,ind:a.ind,in:"layers"});var r=[];n(a.refId,r);var l=r.map((e=>Object(g["a"])(Object(g["a"])({},e),{},{ip:a.ip,op:a.op})));return e.concat(...l)}),[]);function n(e,a){var r=t.find((a=>a.id===e));if(r){if(r.p)return void a.push({ty:2,assetId:r.id,assetValue:r.p,in:"assets"});if(r.layers)for(var l=0;l<r.layers.length;l++){var c=r.layers[l];1!==c.ty&&3!==c.ty&&4!==c.ty&&(5===c.ty?a.push({ty:5,assetId:r.id,assetValue:c.t.d.k,ind:c.ind,in:"assets"}):n(c.refId,a))}}}}var fe=e=>{var a=Object(x["b"])(void 0),t=Object(p["a"])(a,2),u=t[0],g=t[1],h=Object(f["useState"])([]),E=Object(p["a"])(h,2),y=(E[0],E[1],Object(f["useState"])([])),j=Object(p["a"])(y,2),w=j[0],k=j[1],N=Object(f["useContext"])(ee["a"]),_=Object(f["useState"])([]),C=Object(p["a"])(_,2),S=C[0],I=C[1],z=Object(f["useState"])(!1),T=Object(p["a"])(z,2),D=T[0],P=T[1],J=Object(f["useState"])(!1),B=Object(p["a"])(J,2),R=B[0],W=B[1],V=()=>{var a;Object(le["JumpToThisPage"])({tab:null!==(a=e.location.query.from)&&void 0!==a?a:"template"})},U=Object(f["useCallback"])((e=>{console.log(e.url,e.id),H(e.id,e.url)}),[u]),F=Object(f["useCallback"])(((e,a,t,n)=>r=>{console.log(e,a,r,n),A(e,a,t,r,n)}),[u]),A=Object(f["useCallback"])(((e,a,t,n,r)=>{var l=re.a.cloneDeep(null===u||void 0===u?void 0:u.templateInfo);if(console.log(t,r,a,JSON.stringify(n.t)),l){if("assets"===t)for(var c,i=null!==(c=null===l||void 0===l?void 0:l.assets)&&void 0!==c?c:[],o=0;o<i.length;o++){var s=i[o];if(s.id===e)for(var d=0;d<s.layers.length;d++){var m=s.layers[d];if(5===m.ty&&m.ind===r){m.t.d.k[a].s=n,m.t.d.k[a].s.t=n.t.replace(/\n/g,"\r");break}}}else for(var v,p=null!==(v=null===l||void 0===l?void 0:l.layers)&&void 0!==v?v:[],f=0;f<p.length;f++)if(f===r-1){var b=p[f];if(console.log(b),5===b.ty){console.log(n),b.t.d.k[a].s=n,b.t.d.k[a].s.t=n.t.replace(/\n/g,"\r");break}}console.log(JSON.parse(JSON.stringify(l))),g({templateInfo:l}),M(),Q(l)}}),[u]),q=(e,a)=>{console.log(e,a),g({musicId:e,musicUrl:a.key}),M()},M=()=>{var e;null===(e=N.current)||void 0===e||e.goEndStop()},H=Object(f["useCallback"])(((e,a)=>{var t=re.a.cloneDeep(null===u||void 0===u?void 0:u.templateInfo);if(t){for(var n,r=null!==(n=null===t||void 0===t?void 0:t.assets)&&void 0!==n?n:[],l=0;l<r.length;l++){var c=r[l];if(c.id===e){c.p=a;break}}g({templateInfo:t}),M(),Q(t)}}),[u]),G=function(){var a=Object(v["a"])(d.a.mark((function a(){var t,n,r,l,c;return d.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null===u||void 0===u?void 0:u.templateInfo){a.next=3;break}return m["b"].error("\u6a21\u677f\u4fe1\u606f\u4e0d\u5b8c\u6574"),a.abrupt("return");case 3:if(null===u||void 0===u?void 0:u.musicId){a.next=6;break}return m["b"].error("\u8fd8\u672a\u9009\u62e9\u97f3\u4e50\u54e6"),a.abrupt("return");case 6:return W(!0),a.next=9,Object(L["d"])({templateId:null!==(t=e.location.query.templateId)&&void 0!==t?t:void 0,id:null!==(n=e.location.query.videoId)&&void 0!==n?n:void 0,videoInfo:(null===u||void 0===u?void 0:u.templateInfo)?JSON.stringify(null===u||void 0===u?void 0:u.templateInfo):"",musicId:null===u||void 0===u?void 0:u.musicId,size:null===u||void 0===u?void 0:u.size,musicUrl:null===u||void 0===u?void 0:u.musicUrl});case 9:r=a.sent,l=r.status,c=r.data,W(!1),l>=200&&l<300&&100===c.result&&(m["b"].success("\u63d0\u4ea4\u6210\u529f\uff0c\u8bf7\u5230\u6211\u7684\u89c6\u9891\u5e93\u4e2d\u67e5\u770b\u89c6\u9891\u751f\u6210\u72b6\u6001"),Object(le["JumpToThisPage"])({tab:"library"}));case 14:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),Z=()=>{P(!0);var a=e.location.query,t=a.templateId,n=a.videoId;(null===n||void 0===n?void 0:n.toString())?Object(L["i"])({id:n}).then((e=>{var a,t;(P(!1),console.log("videoinfo-----------",JSON.parse(null===(a=e.data.data)||void 0===a?void 0:a.videoInfo)),e.data.data)&&(Q(JSON.parse(null===(t=e.data.data)||void 0===t?void 0:t.videoInfo)),g({musicUrl:e.data.data.musicUrl,musicId:e.data.data.musicId,size:e.data.data.size,templateInfo:JSON.parse(e.data.data.videoInfo)}))})):(null===t||void 0===t?void 0:t.toString())&&Object(L["h"])({id:t}).then((e=>{var a,t,n;(P(!1),e.data.data)&&(console.log("templateinfo-----------",JSON.parse(null===(a=e.data.data)||void 0===a?void 0:a.templateInfo)),Q(JSON.parse(null===(t=e.data.data)||void 0===t?void 0:t.templateInfo)),g({musicUrl:e.data.data.musicUrl,musicId:e.data.data.musicId,size:e.data.data.size,templateInfo:JSON.parse(null===(n=e.data.data)||void 0===n?void 0:n.templateInfo)}))}))},K=function(){var e=Object(v["a"])(d.a.mark((function e(){var a,t,n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(L["e"])();case 2:n=e.sent,r=n.data,Array.isArray(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.musicList)&&k(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.musicList);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=e=>{var a=ge(e),t=re.a.cloneDeep(a).sort(((e,a)=>a.ty-e.ty));I(t)},Y=Object(f["useCallback"])((()=>S.map((e=>b.a.createElement("div",{className:O.a.uploadItem,key:e.assetId},b.a.createElement("div",{className:O.a.uploadItemLeft},b.a.createElement("span",{className:"".concat(O.a.icon," dz-iconfont ").concat(se[e.ty]," ft16")}),b.a.createElement("div",{className:O.a.line})),b.a.createElement("div",{className:O.a.right},2===e.ty?b.a.createElement(X,{key:e.assetId,curImgData:{url:e.assetValue,id:e.assetId},onChange:U}):5===e.ty?b.a.createElement("div",{key:e.assetId},e.assetValue.map(((a,t)=>b.a.createElement(ve,{key:t,text:a.s,onChange:F(e.assetId,t,e.in,e.ind)})))):b.a.createElement("div",null,"\u672a\u77e5\u7c7b\u578b")))))),[S,u]);return Object(f["useEffect"])((()=>{var e,a,t;Z(),K(),null===(e=window)||void 0===e||null===(a=e.RayCloud)||void 0===a||null===(t=a.util)||void 0===t||t.ap({point:"18.24850.50934.50936"})}),[]),b.a.createElement(n["a"],{size:"small"},b.a.createElement("div",{className:"flex-start ft14 mb20"},b.a.createElement("div",{className:"flex-start ft14 mr16 pointer c-gray",onClick:V},b.a.createElement("div",{className:"dz-iconfont dz-arrow-left ft14 c-gray mr4"}),b.a.createElement("div",null,"\u8fd4\u56de")),b.a.createElement("div",{className:"ft20",style:{color:"#333"}},"\u89c6\u9891\u8bbe\u7f6e")),b.a.createElement(r["a"],{spinning:D},b.a.createElement(l["a"],{gutter:24},b.a.createElement(c["a"],{span:"12"},b.a.createElement("div",{className:O.a.left},b.a.createElement("div",null,b.a.createElement("div",{className:"c-3 ft14"},"1.\u4e0a\u4f20\u7d20\u6750"),b.a.createElement("div",{className:"mb12 ft12 c-gray"},"\u5efa\u8bae\u4e0a\u4f20\u5c3a\u5bf8\u5927\u4e8e\u7b49\u4e8e720*1280, JPG\u3001PNG\u3001JPEG\u7b49\u56fe\u7247\u683c\u5f0f\uff0c3M\u4ee5\u5185"),b.a.createElement("div",{className:O.a.uploadArea},b.a.createElement("div",{className:O.a.uploadList},Y())),b.a.createElement("div",{className:"c-3 ft14 mt20 mb12"},"2.\u9009\u62e9\u97f3\u4e50"),b.a.createElement(s["a"],{style:{width:"100%"},onChange:q,value:null===u||void 0===u?void 0:u.musicId},w.map((e=>b.a.createElement(b.a.Fragment,null,b.a.createElement(s["a"].Option,{key:e.musicUrl,value:e.id},e.name)))))),b.a.createElement("div",{className:"flex-start mt20"},b.a.createElement(i["a"],{title:"\u8fd4\u56de\u540e\uff0c\u5f53\u524d\u9875\u9762\u7684\u6570\u636e\u4e0d\u4f1a\u4fdd\u5b58\uff0c\u662f\u5426\u8fd4\u56de\uff1f",onConfirm:Object(v["a"])(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:V();case 1:case"end":return e.stop()}}),e)})))},b.a.createElement(o["a"],{className:"mr20"},"\u4e0a\u4e00\u6b65")),b.a.createElement(o["a"],{loading:R,type:"primary",onClick:G},"\u5b8c\u6210")))),b.a.createElement(c["a"],{span:"12"},b.a.createElement("div",{style:{marginTop:"56px"}},b.a.createElement(te,{animationData:u}))))))};a["default"]=fe},"9gx3":function(e,a,t){e.exports={imageSpace:"imageSpace___T2iS9",left:"left___3py5q",treeArea:"treeArea___21T-c",right:"right___2QXMw",imgList:"imgList___WdCrJ",imgListItem:"imgListItem___2D9oB",imgItemChecked:"imgItemChecked___31tCL",img:"img___1FHSP"}},"9lBp":function(e,a,t){e.exports={wrapper:"wrapper___3HaG1",img:"img___G83eD",mask:"mask___27dNt",show:"show___R7z0g",hide:"hide___Fm67u"}},QeBL:function(e,a,t){"use strict";t.r(a),t.d(a,"JumpToThisPage",(function(){return ee}));t("IzEo");var n=t("bx4M"),r=(t("Znn+"),t("ZTPi")),l=t("ODXe"),c=t("cDcd"),i=t.n(c),o=(t("DYRE"),t("zeV3")),s=(t("+L6B"),t("2/Rp")),u=(t("DjyN"),t("NUBc")),d=(t("T2oS"),t("W9HT")),m=(t("R9oj"),t("ECub")),v=(t("/zsF"),t("PArb")),p=(t("14J3"),t("BMrR")),g=(t("jCWc"),t("kPKH")),f=t("o0o1"),b=t.n(f),h=t("HaE+"),E=t("VTBJ"),O=t("e3eW"),y=t("x8Kg"),j=t.n(y),w=e=>{var a=e.label,t=e.tags,n=e.checkedTag,r=e.onChange,l=e=>()=>{e.id!==n&&r(e.id,e)};return i.a.createElement("div",{className:"c-normal ft-14"},i.a.createElement("div",{className:"flex-start"},i.a.createElement("div",{className:"mr24"},a,":"),i.a.createElement("div",null,t.map((e=>i.a.createElement("div",{key:e.id,onClick:l(e),className:"mr28 ".concat(j.a.tag," ").concat(e.id===n?j.a.checked:"")},i.a.createElement("span",{className:j.a.tagLabel},e.tag)))))))},k=w,N=t("Urjs"),_={desc:"asc",asc:"desc",empty:"desc"},x=e=>{var a=a=>()=>{e.onChange(_[a])};return i.a.createElement("div",{className:"flex-start ft14 c-normal pointer",onClick:a(e.activeValue)},i.a.createElement("div",{className:"mr5"},e.text||"\u5360\u4f4d\u6587\u5b57"),i.a.createElement("div",{className:"flex-center"},i.a.createElement("div",{className:"dz-iconfont c-gray ft12 dz-shengxu flex-center ".concat("asc"===e.activeValue&&"c-blue")}),i.a.createElement("div",{className:"dz-iconfont c-gray ft12 dz-jiangxu flex-center ".concat("desc"===e.activeValue&&"c-blue"),style:{marginLeft:"-11px"}})))},C=x;function S(e){var a=a=>t=>{e.onChange({key:a,value:t})},t=()=>e.filters.reduce(((t,n,r)=>{var l=i.a.createElement(C,{key:n.key,text:n.label,activeValue:e.value.key===n.key?e.value.value:"empty",onChange:a(n.key)});return r===e.filters.length-1?t.concat(l):t.concat(i.a.createElement(i.a.Fragment,null,l,i.a.createElement(v["a"],{type:"vertical"})))}),[]);return i.a.createElement("div",{className:"flex-start ".concat(e.className)},t())}var I=S,z=t("RzRL");function T(e){return new Promise(((a,t)=>{window.upgradeDialogNew.create(e,(function(e){e?a():t()}))}))}var D=10,L=1,P=[{label:"\u89c6\u9891\u5c3a\u5bf8",id:"size",tags:[{id:"square",tag:"\u65b9\u5f62"},{id:"vertical",tag:"\u7ad6\u7248"},{id:"horizontal",tag:"\u6a2a\u7248"}]},{label:"\u884c\u4e1a\u7c7b\u578b",id:"type",tags:[{id:"all",tag:"\u5168\u90e8\u884c\u4e1a"},{id:"eb",tag:"\u7535\u5546"}]}],J=[{key:"hot",label:"\u4f7f\u7528\u6700\u591a"},{key:"modifyTime",label:"\u6700\u8fd1\u66f4\u65b0"}],B={desc:"hotDesc",asc:"hotAsc",empty:""},R={desc:"modifyTimeDesc",asc:"modifyTimeAsc",empty:""},W=e=>{var a,t=Object(N["b"])({order:"hotDesc",size:"square",type:"all",pageSize:10,pageNo:1}),n=Object(l["a"])(t,2),r=n[0],o=n[1],f=Object(c["useState"])({key:"hot",value:"desc"}),y=Object(l["a"])(f,2),j=y[0],w=y[1],_=Object(N["c"])(z["b"],{initialData:{tempList:[],totalNum:2},adapterResponse:e=>{var a;return Object(E["a"])(Object(E["a"])({},e),{},{tempList:null!==(a=null===e||void 0===e?void 0:e.tempList.map((e=>Object(E["a"])(Object(E["a"])({},e),{},{templateInfo:JSON.parse(e.templateInfo)}))))&&void 0!==a?a:[]})}}),x=_.data,C=_.run,S=_.loading,W=a=>Object(h["a"])(b.a.mark((function t(){return b.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T("makeVideoDemo");case 3:e.onUse&&e.onUse(a),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])}))),V=e=>a=>{console.log(e,a),o({[e]:a,pageSize:D,pageNo:L})},U=e=>{w(e)},F=e=>{o({pageNo:e})},A=(e,a)=>{o({pageSize:a})};return Object(c["useEffect"])((()=>{console.log(r),C(r)}),[r]),Object(c["useEffect"])((()=>{("hot"===j.key&&B[j.value]||"modifyTime"===j.key&&R[j.value])&&o({order:B[j.value],pageNo:L,pageSize:D})}),[j]),Object(c["useLayoutEffect"])((()=>{var e,a,t;null===(e=window.RayCloud)||void 0===e||null===(a=e.util)||void 0===a||null===(t=a.ap)||void 0===t||t.call(a,{point:"18.24850.50934.50935"})}),[]),i.a.createElement("div",null,i.a.createElement(p["a"],{className:"mt20"},P.map((e=>{var a=e.label,t=e.id,n=e.tags;return i.a.createElement(g["a"],{key:t,span:24,className:"mb12"},i.a.createElement(k,{tags:n,label:a,checkedTag:r[t],onChange:V(t)}))}))),i.a.createElement(v["a"],{type:"horizontal",className:"mt8 mb20"}),i.a.createElement("div",{className:"mb16"},i.a.createElement(I,{filters:J,value:j,onChange:U})),i.a.createElement(d["a"],{spinning:S},i.a.createElement(p["a"],{gutter:24},(null===x||void 0===x?void 0:x.tempList.length)?null===x||void 0===x?void 0:x.tempList.map((e=>i.a.createElement(g["a"],{key:e.id,className:"mb16"},i.a.createElement(O["b"],{animationData:e,status:"success",key:e.id},i.a.createElement(s["a"],{type:"primary",onClick:W(e)},"\u5f00\u59cb\u5236\u4f5c"))))):i.a.createElement(g["a"],{span:"24"},i.a.createElement(m["a"],null)))),i.a.createElement(p["a"],{justify:"end"},i.a.createElement(g["a"],null,i.a.createElement(u["a"],{showQuickJumper:!0,current:r.pageNo,pageSize:r.pageSize,showSizeChanger:!0,onShowSizeChange:A,onChange:F,total:null!==(a=null===x||void 0===x?void 0:x.totalNum)&&void 0!==a?a:0}))))},V=W,U=t("/sTe"),F=(t("P2fV"),t("NJEC")),A=(t("miYZ"),t("tsqr")),q=10,M=1,H=[{label:"\u89c6\u9891\u5c3a\u5bf8",id:"size",tags:[{id:"square",tag:"\u65b9\u5f62"},{id:"vertical",tag:"\u7ad6\u7248"},{id:"horizontal",tag:"\u6a2a\u7248"}]}],G={desc:"newToOld",asc:"oldToNew",empty:""},Z=[{key:"use",label:"\u6700\u8fd1\u66f4\u65b0"}],K=e=>{var a,t=Object(N["b"])({order:"newToOld",size:"square",pageSize:q,pageNo:M}),n=Object(l["a"])(t,2),r=n[0],o=n[1],f=Object(c["useState"])([]),y=Object(l["a"])(f,2),j=y[0],w=y[1],_=Object(c["useState"])({key:"use",value:"desc"}),x=Object(l["a"])(_,2),C=x[0],S=x[1],D=Object(c["useState"])(),L=Object(l["a"])(D,2),P=L[0],J=(L[1],Object(N["c"])(z["j"],{initialData:{videoList:[],totalNum:0},adapterResponse:e=>{var a;return Object(E["a"])(Object(E["a"])({},e),{},{videoList:null!==(a=null===e||void 0===e?void 0:e.videoList.map((e=>Object(E["a"])(Object(E["a"])({},e),{},{videoInfo:JSON.parse(e.videoInfo)}))))&&void 0!==a?a:[]})}})),B=J.data,R=J.run,W=J.loading,V=e=>{S(e)};Object(c["useEffect"])((()=>{"use"===C.key&&[C.value]&&o({order:G[C.value],pageSize:q,pageNo:M})}),[C]);var K=e=>a=>{o({[e]:a,pageNo:M,pageSize:q})},Q=e=>()=>{window.open(e.url)},X=e=>Object(h["a"])(b.a.mark((function a(){return b.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T("editVideo");case 3:Object(U["JumpToThisPage"])({videoId:e.id,from:"library"}),a.next=8;break;case 6:a.prev=6,a.t0=a["catch"](0);case 8:case"end":return a.stop()}}),a,null,[[0,6]])}))),Y=function(){var e=Object(h["a"])(b.a.mark((function e(a){var t,n;return b.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(z["c"])({url:a.url,id:a.id});case 2:t=e.sent,n=t.status,n>=200&&n<300&&(A["b"].success("\u5220\u9664\u6210\u529f"),R(r));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),$=e=>a=>{console.log(e),w((t=>a?t.concat(e):t.filter((a=>e!==a))))},ee=e=>{o({pageNo:e})},ae=(e,a)=>{console.log(e,a),o({pageSize:a})};return Object(c["useEffect"])((()=>{R(r)}),[r]),Object(c["useLayoutEffect"])((()=>{var e,a,t;null===(e=window)||void 0===e||null===(a=e.RayCloud)||void 0===a||null===(t=a.util)||void 0===t||t.ap({point:"18.24850.50934.50937"})}),[]),i.a.createElement("div",null,i.a.createElement(p["a"],{className:"mt20"},H.map((e=>{var a=e.label,t=e.id,n=e.tags;return i.a.createElement(g["a"],{key:t,span:24,className:"mb12"},i.a.createElement(k,{tagId:t,tags:n,label:a,checkedTag:r[t],onChange:K(t)}))}))),i.a.createElement(v["a"],{type:"horizontal",className:"mt8 mb20"}),i.a.createElement(I,{filters:Z,value:C,onChange:V,className:"mb16"}),i.a.createElement(d["a"],{spinning:W},i.a.createElement(p["a"],{gutter:24},(null===B||void 0===B?void 0:B.videoList.length)?null===B||void 0===B?void 0:B.videoList.map((e=>i.a.createElement(g["a"],{key:e.id,className:"mb16"},i.a.createElement(O["b"],{status:e.status,animationData:Object(E["a"])(Object(E["a"])({},e),{},{templateInfo:e.videoInfo}),key:e.id,checkedStatus:!!P,onSelect:$(e.id),checked:j.includes(e.id)},i.a.createElement(s["a"],{type:"primary",className:"mr12",size:"small",onClick:Q(e),disabled:"success"!==e.status},"\u4e0b\u8f7d"),i.a.createElement(s["a"],{className:"mr12",size:"small",onClick:X(e),disabled:"loading"===e.status},"\u7f16\u8f91"),i.a.createElement(F["a"],{title:"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u64a4\u9500\uff0c\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:Object(h["a"])(b.a.mark((function a(){return b.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:Y(e);case 1:case"end":return a.stop()}}),a)}))),disabled:"loading"===e.status},i.a.createElement(s["a"],{size:"small",disabled:"loading"===e.status},"\u5220\u9664")))))):i.a.createElement(g["a"],{span:"24"},i.a.createElement(m["a"],null))),i.a.createElement(p["a"],{justify:"end"},i.a.createElement(g["a"],null,i.a.createElement(u["a"],{showQuickJumper:!0,current:r.pageNo,pageSize:r.pageSize,showSizeChanger:!0,onShowSizeChange:ae,onChange:ee,total:null!==(a=null===B||void 0===B?void 0:B.totalNum)&&void 0!==a?a:0})))))},Q=K,X=e=>{var a=Object(c["useState"])("template"),t=Object(l["a"])(a,2),n=t[0],r=t[1],u=[{tab:"\u89c6\u9891\u6a21\u677f",key:"template"},{tab:"\u6211\u7684\u89c6\u9891",key:"library"}],d=e=>{Object(U["JumpToThisPage"])({templateId:e.id})},m=e=>()=>{r(e)};return Object(c["useEffect"])((()=>{e.activeTab&&r(e.activeTab)}),[e.activeTab]),i.a.createElement(i.a.Fragment,null,i.a.createElement(o["b"],{size:-1,direction:"horizontal"},u.map((e=>{var a=e.tab,t=e.key;return i.a.createElement(s["a"],{key:t,onClick:m(t),type:t===n?"primary":"default"},a)}))),"template"===n&&i.a.createElement(V,{onUse:d}),"library"===n&&i.a.createElement(Q,null))},Y=X,$=t("9kvl"),ee=e=>{$["a"].push({pathname:"/",query:e})},ae=e=>{var a=Object(c["useState"])("create"),t=Object(l["a"])(a,2),o=t[0],s=t[1],u=Object(c["useRef"])(null),d=[{tab:"\u521b\u5efa\u89c6\u9891",key:"create",comp:i.a.createElement(Y,{activeTab:e.location.query.tab})}],m=e=>{console.log(e),s(e)};return i.a.createElement(O["a"].Provider,{value:u},i.a.createElement(n["a"],null,i.a.createElement(r["a"],{activeKey:o,onChange:m},d.map((e=>{var a=e.tab,t=e.key,n=e.comp;return i.a.createElement(r["a"].TabPane,{tab:a,key:t},n)})))))};a["default"]=ae},RzRL:function(e,a,t){"use strict";t.d(a,"b",(function(){return v})),t.d(a,"j",(function(){return p})),t.d(a,"h",(function(){return g})),t.d(a,"i",(function(){return f})),t.d(a,"e",(function(){return b})),t.d(a,"d",(function(){return h})),t.d(a,"c",(function(){return E})),t.d(a,"a",(function(){return O})),t.d(a,"f",(function(){return y})),t.d(a,"g",(function(){return j}));t("miYZ");var n,r=t("tsqr"),l=t("VTBJ"),c=t("vDqi"),i=t.n(c);function o(e,a,t){return u(Object(l["a"])({url:e,payload:a,method:n.GET},t))}function s(e,a,t){return u(Object(l["a"])({url:e,payload:a,method:n.POST},t))}function u(e){return d(Object(l["a"])(Object(l["a"])({},e),{},{[e.method===n.GET||e.method===n.DELETE?"params":"data"]:e.payload})).then(m)}function d(e){return i()(e)}function m(e){var a=null!==e&&void 0!==e?e:{},t=a.status,n=a.data,l=[500,400];return l.includes(t)?(r["b"].error("\u8bf7\u786e\u8ba4\u60a8\u7684\u64cd\u4f5c\u6216\u8f93\u5165\u662f\u5426\u6b63\u786e\uff01"),e):200===t&&100!==n.result?(r["b"].error(n.errorMessage),e):e}i.a.interceptors.request.use((e=>{var a;return console.log(e.url,Object({NODE_ENV:"production"}),"webview","+++++++"),null===(a=e.url)||void 0===a||a.indexOf("blob"),e}),(e=>Promise.resolve(e))),i.a.interceptors.response.use((e=>e),(e=>{if(i.a.isCancel(e)){var a={config:{},headers:{},status:-999,statusText:"\u4e2d\u65ad\u8bf7\u6c42",data:void 0};return Promise.resolve(a)}return Promise.resolve(e.response)})),function(e){e["GET"]="GET",e["POST"]="POST",e["PUT"]="PUT",e["DELETE"]="DELETE"}(n||(n={}));var v=e=>o("/videoTemplate/list",e),p=e=>o("/video/list",e),g=e=>o("/videoTemplate/info",e),f=e=>o("/video/info",e),b=()=>o("/music/list"),h=e=>s("/video/videoPreview",e),E=e=>o("/video/delete",e),O=e=>s("/upload/image",e),y=()=>o("/picture/category"),j=e=>o("/picture/list",e)},Urjs:function(e,a,t){"use strict";t.d(a,"a",(function(){return s})),t.d(a,"b",(function(){return u})),t.d(a,"c",(function(){return d}));var n=t("VTBJ"),r=t("o0o1"),l=t.n(r),c=t("HaE+"),i=t("ODXe"),o=t("cDcd");function s(e){var a=e.showConfirmLoading,t=void 0!==a&&a,n=e.onOk,r=e.onCancel,s=Object(o["useState"])(!1),u=Object(i["a"])(s,2),d=u[0],m=u[1],v=Object(o["useState"])(!1),p=Object(i["a"])(v,2),g=p[0],f=p[1],b={confirmLoading:d,visible:g,onCancel:()=>{f(!1)},onOk:function(){var e=Object(c["a"])(l.a.mark((function e(){var a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t&&m(!0),e.next=3,n();case 3:a=e.sent,t&&m(!1),a&&f(!1);case 6:case"end":return e.stop()}}),e)})));function a(){return e.apply(this,arguments)}return a}(),afterClose:()=>{r&&r()}},h=e=>{f(e)};return[b,h]}function u(e){var a=(e,a)=>Object(n["a"])(Object(n["a"])({},e),a),t=Object(o["useReducer"])(a,e),r=Object(i["a"])(t,2),l=r[0],c=r[1];return[l,c]}function d(e,a){var t=Object(o["useState"])(null===a||void 0===a?void 0:a.initialData),r=Object(i["a"])(t,2),s=r[0],u=r[1],d=Object(o["useState"])(null===a||void 0===a?void 0:a.initialParams),m=Object(i["a"])(d,2),v=m[0],p=m[1],g=Object(o["useState"])(!1),f=Object(i["a"])(g,2),b=f[0],h=f[1],E=function(){var t=Object(c["a"])(l.a.mark((function t(r){var c,i,o,s,d;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=r?Object(n["a"])(Object(n["a"])({},v),r):v,h(!0),t.next=4,e(o);case 4:s=t.sent,d=s.data.data,h(!1),u(null!==(c=null===a||void 0===a||null===(i=a.adapterResponse)||void 0===i?void 0:i.call(a,d))&&void 0!==c?c:d),p(r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{run:E,data:s,loading:b}}},"arS/":function(e,a,t){e.exports={left:"left___IFdZ6",uploadArea:"uploadArea___9-N45",uploadList:"uploadList___2ImEA",uploadItem:"uploadItem___3j_5k",uploadItemLeft:"uploadItemLeft___NwDsl",icon:"icon___BY5s8",line:"line___2ojde",right:"right___3PAYv"}},e3eW:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var n=t("ODXe"),r=t("cDcd"),l=t.n(r),c=t("n9wO"),i=t.n(c),o=t("mdCM"),s=t.n(o),u=t("Urjs"),d=t("/sTe"),m=t("LvDl"),v=t.n(m);function p(e){var a=e.fr,t=e.op,n=e.assets,r=Object(d["getLayers"])(e).reduce(((e,a)=>(5===a.ty&&(e+=a.assetValue.reduce(((e,a)=>{var t,n,r;return e+=null!==(t=null===(n=a.s.t)||void 0===n||null===(r=n.replace(/\s+/g,""))||void 0===r?void 0:r.length)&&void 0!==t?t:0,e}),0)),e)),0);return{fps:a,duration:t/a,images:n.filter((e=>{if(e.p)return!0})).map((e=>({id:e.id,url:e.p}))),textCount:r}}var g=Object(r["forwardRef"])(((e,a)=>{var t=Object(u["b"])({duration:0,textCount:0,imgCount:0,images:[],isPaused:!0}),c=Object(n["a"])(t,2),i=c[0],o=c[1],d=Object(r["useRef"])(null),m=Object(r["useRef"])(),g=Object(r["useRef"])(null),f=()=>{var e,a,t,n;o({isPaused:!1}),(null===m||void 0===m||null===(e=m.current)||void 0===e?void 0:e.totalFrames)&&(null===m||void 0===m||null===(a=m.current)||void 0===a?void 0:a.currentFrame)===(null===m||void 0===m||null===(t=m.current)||void 0===t?void 0:t.totalFrames)-1?(b(),O()):(null===m||void 0===m||null===(n=m.current)||void 0===n||n.play(),E())},b=()=>{var e;null===m||void 0===m||null===(e=m.current)||void 0===e||e.goToAndPlay(0,!0)},h=()=>{var e,a,t=null===m||void 0===m||null===(e=m.current)||void 0===e?void 0:e.getDuration(!0);t&&(null===m||void 0===m||null===(a=m.current)||void 0===a||a.goToAndStop(t-1,!0)),o({isPaused:!0}),y()},E=()=>{var e;null===(e=g.current)||void 0===e||e.play()},O=()=>{var e;g.current&&(g.current.currentTime=0),null===(e=g.current)||void 0===e||e.play()},y=()=>{var e;g.current&&(g.current.currentTime=0),null===(e=g.current)||void 0===e||e.pause()},j=()=>{};return Object(r["useImperativeHandle"])(a,(()=>({play:()=>{f()},goEndStop:()=>{h()},getAllImages:()=>{j()}}))),Object(r["useEffect"])((()=>{if(e.animationData){var a=p(e.animationData),t=a.duration,n=a.images,r=a.textCount;o({duration:t,imgCount:n.length,images:n,textCount:r})}}),[e.animationData]),Object(r["useEffect"])((()=>{console.log(i),e.onAnimationDataChange(i)}),[i]),Object(r["useLayoutEffect"])((()=>{var a,t,n;return m.current=s.a.loadAnimation({container:d.current,animationData:v.a.cloneDeep(e.animationData),renderer:"svg",loop:!1,autoplay:!1,rendererSettings:{className:"svg"}}),null===m||void 0===m||null===(a=m.current)||void 0===a||a.addEventListener("DOMLoaded",(()=>{console.log("DOMLoaded"),h()})),null===m||void 0===m||null===(t=m.current)||void 0===t||t.addEventListener("loaded_images",(()=>{console.log("loaded_images")})),null===m||void 0===m||null===(n=m.current)||void 0===n||n.addEventListener("complete",(()=>{console.log("complete"),h()})),()=>{var e,a,t,n;console.log("destroy"),null===m||void 0===m||null===(e=m.current)||void 0===e||e.removeEventListener("DOMLoaded"),null===m||void 0===m||null===(a=m.current)||void 0===a||a.removeEventListener("loaded_images"),null===m||void 0===m||null===(t=m.current)||void 0===t||t.removeEventListener("complete"),null===m||void 0===m||null===(n=m.current)||void 0===n||n.destroy()}}),[e.animationData]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:d}),l.a.createElement(l.a.Fragment,null,l.a.createElement("audio",{ref:g,controls:!0,loop:!0,src:e.musicUrl},"\u60a8\u7684\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301")))})),f=g,b=Object(r["createContext"])({current:null}),h=e=>{var a,t,c,o,s,u=e.showFooter,d=void 0===u||u,m=Object(r["useRef"])(null),v=Object(r["useState"])({duration:0,textCount:0,images:[],imgCount:0,isPaused:!1}),g=Object(n["a"])(v,2),h=g[0],E=g[1],O=h.duration,y=h.textCount,j=(h.images,h.imgCount),w=h.isPaused,k=Object(r["useState"])(!1),N=Object(n["a"])(k,2),_=N[0],x=N[1],C=Object(r["useState"])(""),S=Object(n["a"])(C,2),I=(S[0],S[1],Object(r["useState"])([])),z=Object(n["a"])(I,2),T=(z[0],z[1],Object(r["useContext"])(b));T.current=m.current;var D=()=>{var e;null===m||void 0===m||null===(e=m.current)||void 0===e||e.play()},L=e=>{E(e)},P=()=>{console.log("enter"),e.checkedStatus||x(!0)},J=()=>{e.checkedStatus&&e.onSelect&&e.onSelect(!e.checked)},B=()=>{e.checkedStatus||x(!1)};return Object(r["useEffect"])((()=>{if(console.log(e.animationData),e.animationData){var a=p(e.animationData.templateInfo),t=a.duration,n=a.images,r=a.textCount;E({duration:t,imgCount:n.length,images:n,isPaused:!0,textCount:r})}}),[e.animationData]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"".concat(i.a.videoCardWrapper," ").concat(e.checkedStatus?i.a.checked:e.checkedStatus," ").concat(e.checked?i.a.activeChecked:""),onMouseEnter:P,onMouseLeave:B,onClick:J},l.a.createElement("div",{className:"".concat(i.a.videoWrapper," ").concat(i.a[null!==(a=null===(t=e.animationData)||void 0===t?void 0:t.size)&&void 0!==a?a:i.a.vertical])},l.a.createElement("div",{className:"flex-center-column",style:{height:"100%"}},e.animationData&&"success"===e.status&&l.a.createElement(f,{ref:m,musicUrl:null===(c=e.animationData)||void 0===c?void 0:c.musicUrl,animationData:null===(o=e.animationData)||void 0===o?void 0:o.templateInfo,onAnimationDataChange:L}),"loading"===e.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dz-iconfont dz-play-circle ft40",style:{color:"#eee"}}),l.a.createElement("div",{className:"c-gray ft12"},"\u89c6\u9891\u5408\u6210\u4e2d\uff0c\u8bf7\u7a0d\u540e\u5237\u65b0\u67e5\u770b")),"fail"===e.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dz-iconfont dz-play-circle ft40",style:{color:"#eee"}}),l.a.createElement("div",{className:"c-gray ft12"},"\u89c6\u9891\u5408\u6210\u5931\u8d25"))),!e.checkedStatus&&"success"===e.status&&l.a.createElement("div",{className:"".concat(i.a.maskWrapper," ").concat(w?i.a.show:i.a.hide)},l.a.createElement("div",{className:"dz-iconfont dz-play-circle ".concat(i.a.playIcon),onClick:D})),e.checkedStatus&&l.a.createElement("div",{className:i.a.checkedWrapper})),d&&l.a.createElement("div",{className:i.a.videoBottom},l.a.createElement("div",{className:"c-normal ft-14 flex-column ".concat(i.a.textBottom),style:{display:_?"none":"flex"}},l.a.createElement("div",{className:"mb8 mt12"},null===(s=e.animationData)||void 0===s?void 0:s.templateInfo.nm),l.a.createElement("div",{className:"flex-between c-gray"},l.a.createElement("div",{className:"flex-start"},l.a.createElement("div",{className:"mr6"},"\u65f6\u957f"),l.a.createElement("div",null,O,"s")),l.a.createElement("div",{className:"flex-start"},l.a.createElement("div",{className:"flex-center mr16"},l.a.createElement("div",{className:"mr6 dz-iconfont dz-wenzi ft-16 c-gray"}),l.a.createElement("div",null,y)),l.a.createElement("div",{className:"flex-center"},l.a.createElement("div",{className:"mr6 dz-iconfont dz-tupian3 ft-16 c-gray"}),l.a.createElement("div",null,j))))),l.a.createElement("div",{style:{display:_?"flex":"none"},className:i.a.btnBottom},e.children))))};a["b"]=h},n9wO:function(e,a,t){e.exports={videoCardWrapper:"videoCardWrapper___2laRX",videoBottom:"videoBottom___1BwnE",checked:"checked___3ohne",checkedWrapper:"checkedWrapper___1rZwU",activeChecked:"activeChecked___2HQtP",videoWrapper:"videoWrapper___rAkKi",vertical:"vertical___tyUxp",horizontal:"horizontal___IKBMf",square:"square___1SlsK",maskWrapper:"maskWrapper___wMSTF",playIcon:"playIcon___11_Gf",show:"show___3JNqp",hide:"hide___BAHdP",btnBottom:"btnBottom___3pK0J",textBottom:"textBottom___1aQBG"}},x8Kg:function(e,a,t){e.exports={tag:"tag___2rKP9",tagLabel:"tagLabel___14nT5",checked:"checked___ancBB"}}}]);